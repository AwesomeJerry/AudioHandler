!function(){function o(){var o=this;try{window.AudioContext=window.AudioContext||window.webkitAudioContext,o.context=new AudioContext,o.mode="waa",o.bufferList={},o.sourceList={}}catch(t){o.mode="html"}}o.prototype.play=function(o){var t=this;if("waa"==t.mode){var e=t.bufferList[o];if(e){var r=t.connect(e);t.sourceList[o]=r,r.start(0)}else t.load(o)}else t.playByHTML(o),console.debug("Web Audio API is not supported in this browser")},o.prototype.stop=function(o){var t=this,e=t.context,r=t.sourceList[o];r.stop(e.currentTime)},o.prototype.load=function(o){var t=this,e=new XMLHttpRequest;e.open("GET",o,!0),e.responseType="arraybuffer",e.onload=function(){var t=this,r=t.context;r.decodeAudioData(e.response,function(t){var e=this;return t?(e.bufferList[o]=t,void e.play(o)):void console.error("error decoding file data: "+o)}.bind(t),function(t){var e=this;e.playByHTML(o),console.error("decodeAudioData error",t)}.bind(t))}.bind(t),e.onerror=function(){var t=this;t.playByHTML(o),console.error("BufferLoader: XHR error")}.bind(t),e.send()},o.prototype.connect=function(o){var t=this,e=t.context,r=e.createBufferSource();return r.buffer=o,r.connect(e.destination),r},o.prototype.playByHTML=function(o){$("<audio />").attr("src",o).get(0).play()},window.AudioHandler=new o}();